@page
@model CASPARWeb.Pages.Administrator.Buildings.CreateBuildingModel
@{
}
<div class="row">
    <div class="col-2"></div>
    <div class="col-8">
        <div class="card shadow border-0 mt-4">
            <div class="card-header  ml-0 py-3">
                <h2 class="py-2">Create Building</h2>
            </div>
            <div class="card-body p-4">
                <form method="post" class="row">
                    @*<div asp-validation-summary="ModelOnly"></div>*@
                    <div class="form-group mt-1">
                        <label for="inputSemesterName">Building Name</label>
                        @if (Model.id == null) {
                            <input type="text" class="form-control" id="inputBuildingName" asp-for="inputBuildingName" placeholder="building name">
                        } else {
                            <input type="text" class="form-control" id="inputBuildingName" asp-for="inputBuildingName" value="@Model.building.BuildingName">
                        }
                    </div>
                    <div class="form-group mt-2">
                        <label for="inputCampus">Campus</label>
                        <select id="inputCampus" class="form-control" asp-for="inputCampus">
                            @if (Model.id == null) {
                                <option disabled selected>--Select Campus--</option>

                            } else {
                                <option id="disabledCampusName" disabled selected>@Model.tempCampusName</option>
                            }
                            @foreach (var enumerable in Model.DropdownItems) {
                                <option>@enumerable.CampusName</option>
                            }
                        </select>
                    </div>
                    <div class="row pt-2">
                        @if (Model.id == null) {
                            <div class="col-6 col-md-3">
                                <button type="submit" onclick="return ValidateInput()" class="btn btn-primary form-control">Create</button>
                            </div>
                            <div class="col-6 col-md-3">
                                <a asp-page="Index" class="btn btn-outline-primary border  form-control">
                                    Back to List
                                </a>
                            </div>
                        } else {
                            <div class="col-4 col-md-3">
                                <button type="submit" onclick="return ValidateInput()" id="submitButton" class="btn btn-primary form-control">Update</button>
                            </div>
                            <div class="col-4 col-md-3">
                                <a asp-page="Index" class="btn btn-outline-primary border  form-control">
                                    Back to List
                                </a>
                            </div>
                            <div class="col-1 col-md-3">
                            </div>
                            <div class="col-3 col-md-3">
                                <button type="submit" id="deleteButton" class="btn btn-outline-danger form-control">Delete</button>
                            </div>
                        }
                    </div>
                    <input type="hidden" id="pressedDelete" asp-for="inputPressedDelete" value="">
                    <input type="hidden" asp-for="editing" id="theId" value="@Model.tempCampusName">
                </form>
            </div>
        </div>
    </div>
    <div class="col-2"></div>
</div>

<script>
    document.getElementById("deleteButton").addEventListener("click", function () {
        var variableInput = document.getElementById("pressedDelete");
        variableInput.value = "true"; // Set the desired variable value
    });
    function ValidateInput() {
        if (document.getElementById('inputBuildingName').value == "") {
            swal.fire('Error', 'Please Enter a Building Name', 'error');
            return false;
        } else if (document.getElementById('inputCampus').value == "--Select Campus--") {
            swal.fire('Error', 'Please Select a Campus', 'error');
            return false;
        }
        if (document.getElementById('theId') != null) {
            //if we are editing it
            var selectElement = document.getElementById("inputCampus");
            var optionToEnable = selectElement.options[0];
            optionToEnable.disabled = false;
        }
        return true;
    }
</script>